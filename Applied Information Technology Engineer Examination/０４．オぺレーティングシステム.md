# オプレーティングシステム

## ジョブ管理

### 一つのまとまった仕事の単位であるジョブを、それを構成するジョブステップごとに管理

### MF系では、JCLというジョブ制御用のスクリプト言語が使用することがある

## タスク管理（プロセス管理）

### 状態遷移

- 実行状態
- 実行可能状態

	- タイムクォンタム（quote）使い切れ／プリエンプション（Preemption）発生

- 待ち状態

	- IO待ち、他タスク待ち等

### スケジューリング（併用は可能）

- 到着順方式：FIFO／FCFS（Come Served）
- 優先度順位

	- 静的優先順位方式

		- あらかじめ決められた優先順位に従ってスケジューリング。優先順位の低いタスクが実行されない

	- 動的優先順位方式

		- 優先順位を動的に変更することで、スタベーションを防止。優先順位を管理することをエージェントという

			- スタベーション（starvation）:優先順位の低いタスクがなかなか実行されないこと

- ラウンドロビン（Round Robin：RR）方式（巡回式）

	- 同じタイムクォンたを割り当て、一定時間ごとに順番に処理を回していく方式

		- タイムスライス（slice）

			- 一定時間（タイムクォンタム：Time Quantum）ごとにスケジューリングし、タスクを切り替えながらCPU使用権を与える

		- TSS（Time Share System：時分割システム）

			- プロセッサの使用権を微小時間ずつ各端末に与えることによって、見かけ上、同時に複数の端末が使えるようにする方式である

	- プリエンプションされたタスクは、実行可能状態の待ち行列の最後に回される

- 多段フィードバック待ち行列

	- 複数の優先度の待ち行列を持ち、高い優先度の待ち行列から順次処理していく、この時、低い優先度で長期間待っているタスクの優先度を上げ、１度実効したタスクの優先度を下げのアルゴリズムである

- プリエンプション（preemption）方式

	- 優先度順位より、強制的にプロセッサの使用権限を剥奪されることである

		- 横取り式／抢占式

- イベントドリブン方式

	- タスクの状態遷移をトリガ（引き金）としてスケジューリング

### その他用語

- ディスパッチイング

	- タスク管理が、実行可能な状態のタスクから優先順位の高いものを選択し、プロセッサを割り当てることである

- ディスパッチャ

	- ディスパッチイング機能を持つタスク管理のプログラム

- イベントドリブンプリエンション方式

	- 処理要求の発生時に最優先のタスクを実行し、優先順位の低いタスクの実行を中断する方式
	- リアルタイム処理に多く使用される

- リアルタイムOS（RTOS）

	- 優先度高いジョブの実行が決めたれた時間までに終了するという時間制約を守ることが最優先され

## データ管理と入出力管理

### 用語

- 入出力管理（IOCS：Input Output Control System）
- スプーリング（spooling）

	- 低速な装置へ出力する際に、高速装置上のバッファである、プログラムをバッファ（スプール）へ出力後、出力専用のサービスプログラムで実行結果を出力する

- デバイスドライバ
- バッファプール

	- 入出力を行なうために主記憶上に確保された共通バッファである。バッファを多数用意し、複数のプログラムで共有する

- 直接メモリアクセス機構（Direct Memory Access：DMA）

	- CPUの制御を受けずに、主記憶と入出力装置との間でデータ転送を制御する方式である

		- CPUとマザーボードのサポートが必要

- BIOS（Basic Input Output System）

	- 入出力を実行するプログラムをROMに持たせたものである
	- OSはBIOSを経由してキーボードやハードディスク、ディスプレイなど基本なデバイスをせいぎょしている

- UEFI（Unified Extensible Firmware Interface）

	- BIOSの後継

- チャネルサブシステム

	- 入出力専用のコンピュータシステム
	- データ経路より

		- セレクタチャネル

			- 高速機器に用いられ、ある時点では1台の装置と入出力を行なう

		- マルチプレクサスチャネル

			- 複数装置並行

				- バイトマルチプレクサスチャネル

					- 主にキーボード、マウス、プリンタ等低速装置

				- ブロックマルチプレクサスチャネル

					- 主に磁気ディスクなど高速装置

## マルチプログラミング

### 多重プログラミング

- 割込みなどの手法を用い、1台のプロセッサで、複数のプログラムを見かけ上同時に実行しているように見せる仕組みである
- オーバヘッド

	- 目標以外にかかる時間

## ミドルウェア

### API（Application Programming Interface）

- WebAPIなど

### シェル

### デーモン

- UNIXなどのマルチタスクOSにおいてバックグラウンドで動作するプログラムです
- プログラムの末尾にdが付いているのは一般

### 開発フレームワーク

### 分散処理技術

- Apache Hadoopなど

## ファイルシステム

### ルートディレクトリ

### 絶対パス

### 相対パス

## 記憶管理と同期・排他制御

### アドレス空間

- 物理アドレス（実）

	- 絶対番地で参照され

- 論理アドレス（虚）

	- プログラム内で相対的に与えられたアドレス

### 主記憶体の管理方式

- オーバレイ方式（overlay）

	- あらかじめプログラムを分けて補助記憶装置に格納しておき、必要な部分だけ主記憶装置に置く方法です

		- 主に仮想記憶をサポートする以前のOSで使われており、プログラマが考えて指定する

			- ファーストフィット
			- ベストフィット

- スワッピング方式

	- プログラムを補助記憶装置と主記憶との間で入れ替えること

		- ジョブ単位の入替

	- スワップアウト（ロールアウト）

		- 主記憶体→補助記憶装置

	- スワップイン（ロールイン）

		- 補助記憶装置→主記憶体

- 可変区画方式

	- プログラムの大きさに応じて可変の区画を割り当てる

- 固定区画方式

	- 主記憶とプログラムを固定長の単位に分割して管理する

### 仮想記憶システム

- ページ単位の入替

	- 実装されている主記憶容量以上の記憶空間を実現する仕組みで、磁気ディスクを仮想記憶として扱う。主記憶の部分を実アドレス空間、仮想記憶の部分を仮想アドレス空間である

- 動的アドレス変換（DAT：Dynamic Address Translation）

	- 仮想アドレスから実アドレスの変換

- マッピング方式

	- ページング方式

		- プログラムを512〜4kバイトの固定長のブロック（ページ）に分割する方式である

	- セグメント方式

		- プログラムを論理的に意味のある単位で分割する方式である

	- セグメンテーションページング（segmentation paging）

		- セグメントをさらに固定長のページ分割

- ページング

	- ページイン

		- 必要なページを仮想記憶から主記憶に読み込み

	- ページアウト

		- 不要なページを仮想記憶に追い出し

	- ページング

		- ページアウトとページインの総称
		- ページング方法

			- デマンドページング

				- 必要な時点でページング実施

			- プリページング

				- 予測して、予めページング、失敗率が高い可能、一般はデマンドページングを利用

	- ページフォールト

		- プログラム実行中に必要なページが主記憶体にないと発生する割込み

	- スラッシング（Slashing）

		- ページフォールトが頻繁に起こってページインとページアウトが繰り返されること

	- アルゴリズム

		- FIFO（First−In First−Out）

			- 最も長く実記憶にあるページを選択

		- LRU（Least Recently Used）

			- 最後に使用されてから経過時間が最長のページを選択

		- LFU（Least Frequently Used）

			- 使用頻度が最も低いページを選択

### 同期・排他制御

- 同期制御

	- 複数のタスクの実行を矛盾なく行なうため、処理のタイミングを合わせることである

- 排他制御

	- クリティカルセクション

		- 同時に複数のタスクから更新処理を行なうとエラーとなる、このような処理部分（同時更新）

	- デッドロック

		- 発生しないように

			- 資源の確保の順を全てタスクを統一
			- タスクの起動時に必要な資源を一括確保

				- 二相ロック

					- 使用資源のロックを中断なしでまとめて行い、使い終わったら、まとめてロックを解除するという方法
					- 途中で中断させれはいけないような処理のまとまり

						- クリティカルセクション

			- などなど

	- 制御手法

		- セマフォ（semaphore）

			- セマフォ変数初期は1にする
			- 共有資源を使うときsemaphore変数をデクリメント
			- 使用が終了したらインクリメント
			- semaphore変数が0であれば共有資源が使用中と判断すれば良い

		- などなど

## タスクの生成

## タスクの消滅

*XMind: ZEN - Trial Version*