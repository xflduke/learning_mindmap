# オプレーティングシステム

## タスク管理（プロセス管理）

### 状態遷移

- 実行状態
- 実行可能状態
- 待ち状態

	- IO待ち、他タスク待ち等

### スケジューリング

- イベントドリブン方式

	- タスクの状態遷移をトリガ（引き金）としてスケジューリング

- タイムスライス方式（slice）

	- 一定時間（タイムクォンタム：Time Quantum）ごとにスケジューリングし、タスクを切り替えながらCPU使用権を与える

### 優先順位

- 静的優先順位方式

	- あらかじめ決められた優先順位に従ってスケジューリング。優先順位の低いタスクが実行されない

- 動的優先順位方式

	- 優先順位を動的に変更することで、スタベーションを防止。優先順位を管理することをエージェントという

		- スタベーション（starvation）:優先順位の低いタスクがなかなか実行されないこと

### 代表例

- ラウンドロビン（Round Robin：RR）

	- 実行可能状態となったタスクから順に実行されるが、プロセッサの使用時間が決められていて、使用時間が終了したらプリエンプションされて次のタスクにプロセッサの使用源が与えられる。

		- プリエンプション（preemption）：優先度順位より、強制的にプロセッサの使用権限を剥奪されることである

	- プリエンプションされたタスクは、実行可能状態の待ち行列の最後に回される

- TSS（Time Share System：時分割システム）

	- プロセッサの使用権を微小時間ずつ各端末に与えることによって、見かけ上、同時に複数の端末が使えるようにする方式である

### その他用語

- ディスパッチイング

	- タスク管理が、実行可能な状態のタスクから優先順位の高いものを選択し、プロセッサを割り当てることである

- ディスパッチャ

	- ディスパッチイング機能を持つタスク管理のプログラム

- 到着順方式（FIFO）
- イベントドリブンプリエンション方式

	- 処理要求の発生時に最優先のタスクを実行し、優先順位の低いタスクの実行を中断する方式
	- リアルタイム処理に多く使用される

## データ管理と入出力管理

### 用語

- 入出力管理（IOCS：Input Output Control System）
- スプーリング（spooling）

	- 低速な装置へ出力する際に、高速装置上のバッファである、プログラムをバッファ（スプール）へ出力後、出力専用のサービスプログラムで実行結果を出力する

- デバイスドライバ
- バッファプール

	- 入出力を行なうために主記憶上に確保された共通バッファである。バッファを多数用意し、複数のプログラムで共有する

- 直接メモリアクセス機構（Direct Memory Access：DMA）

	- CPUの制御を受けずに、主記憶と入出力装置との間でデータ転送を制御する方式である

		- CPUとマザーボードのサポートが必要

- BIOS（Basic Input Output System）

	- 入出力を実行するプログラムをROMに持たせたものである
	- OSはBIOSを経由してキーボードやハードディスク、ディスプレイなど基本なデバイスをせいぎょしている

- UEFI（Unified Extensible Firmware Interface）

	- BIOSの後継

- チャネルサブシステム

	- 入出力専用のコンピュータシステム
	- データ経路より

		- セレクタチャネル

			- 高速機器に用いられ、ある時点では1台の装置と入出力を行なう

		- マルチプレクサスチャネル

			- 複数装置並行

				- バイトマルチプレクサスチャネル

					- 主にキーボード、マウス、プリンタ等低速装置

				- ブロックマルチプレクサスチャネル

					- 主に磁気ディスクなど高速装置

## マルチプログラミング

### 多重プログラミング

- 割込みなどの手法を用い、1台のプロセッサで、複数のプログらむを見かけ上同時に実行しているように見せる仕組みである
- オーバヘッド

	- 目標以外にかかる時間

## 記憶管理と同期・排他制御

### アドレス空間

- 物理アドレス（実）

	- 絶対番地で参照され

- 論理アドレス（虚）

	- プログラム内で相対的に与えられたアドレス

### 主記憶体の管理方式

- オーバレイ方式（overlay）

	- 同時には使用しないモジュールの構造を明らかにし、あるモジュールが必要となったとき、不要となったモジュールとおなじ領域にロードする、主となるモジュールだけを主記憶体に常駐させ

- スワッピング方式

	- プログラムを補助記憶装置と主記憶との間で入れ替えること

		- ジョブ単位の入替

	- スワップアウト（ロールアウト）

		- 主記憶体→補助記憶装置

	- スワップイン（ロールイン）

		- 補助記憶装置→主記憶体

- 可変区画方式

	- 必要に応じてプログラムの実行領域を主領域に確保する方しきである
	- フラグメンテーション（fragmentation）

		- 主記憶が断片化

	- メモリコンパクション（memory compaction）

		- 主記憶体の隙間を詰めて、連続した利用可能な主記憶領域をふやすことである

	- ガーベジコレクション（GC）

		- 2度と使われないことがわかったいる主記憶体を解放し、再利用できるようにすることである

### 仮想記憶システム

- 実装されている主記憶容量以上の記憶空間を実現する仕組みで、磁気ディスクを仮想記憶として扱う。主記憶の部分を実アドレス空間、仮想記憶の部分を仮想アドレス空間である

	- ページ単位の入替

- 動的アドレス変換（DAT：Dynamic Address Translation）

	- 仮想アドレスから実アドレスの変換

- マッピング方式

	- ページング方式

		- プログラムを512〜4kバイトの固定長のブロック（ページ）に分割する方式である

	- セグメント方式

		- プログラムを論理的に意味のある単位で分割する方式である

	- セグメンテーションページング（segmentation paging）

		- セグメントをさらに固定長のページ分割

- ページングアルゴリズム

	- ページフォールト

		- プルグラム実行中に必要なページが主記憶体にないと発生する割込み

	- スラッシング（Slashing）

		- 実装仕方よりページングが多発させたこと

	- ページアウト

		- 不要なページを仮想記憶に追い出し

	- ページイン

		- 必要なページを仮想記憶から主記憶に読み込み

	- ページング

		- ページアウトとページインの総称
		- ページング方法

			- デマンドページング

				- 必要な時点でページング実施

			- プリページング

				- 予測して、予めページング、失敗率が高い可能、一般はデマンドページングを利用

	- アルゴリズム

		- LRU（Least Recently Used）

			- 最後に使用されてから経過時間が最長のページを選択

		- FIFO（First−In First−Out）

			- 最も長く実記憶にあるページを選択

### 同期・排他制御

- 同期制御

	- 複数のタスクの実行を矛盾なく行なうため、処理のタイミングを合わせることである

- 排他制御

	- クリティカルセクション

		- 同時に複数のタスクから更新処理を行なうとエラーとなる、このような処理部分（同時更新）

	- デッドロック

		- 発生しないように

			- 資源の確保の順を全てタスクを統一
			- タスクの起動時に必要な資源を一括確保
			- などなど

	- 制御手法

		- セマフォ（semaphore）

			- セマフォ変数初期は1にする
			- 共有資源を使うときsemaphore変数をデクリメント
			- 使用が終了したらインクリメント
			- semaphore変数が0であれば共有資源が使用中と判断すれば良い

		- などなど

*XMind: ZEN - Trial Version*