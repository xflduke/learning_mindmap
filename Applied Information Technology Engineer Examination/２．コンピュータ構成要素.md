# コンピュータ構成要素

## ２．１ プロセッサ

### プロセッサの構造と動作原理

- 構成

	- 演算装置

		- フラグレジスタ
		- 算術論理演算そうち

	- 制御装置

		- デコーダ、プログラムカウント

	- レジスタ

		- 汎用レジスタ

			- 中間結果保持
			- ベースアドレス
			- インデックスレジスタ
			- など

		- 専用レジスタ

			- メモリアドレスレジスタ
			- 命令レジスタ
			- データレジスタ

- 割込み

	- 外部割込み

		- 機械チェック割込み

			- 処理装置の誤動作
			- 電源・電圧異常
			- 主記憶障害
			- NMI（NonーMaskable Interrupt）

				- ソフトウェアでこのNMIを禁止することはできない

		- 入出力割込み

			- 入出力完了
			- 入出力状態変化（印刷装置の紙切れ、電源OFFなど）

		- 外部信号割込み

			- システム操作卓からの指示
			- 外部信号（測定器など）

		- タイマ割込み

			- 所定時間経過（インタバルタイマ）
			- 所定時刻経過

	- 内部割込み

		- プログラム割込み（例外割込み）

			- オーバフロー
			- アンダフロー
			- 不正命令コード実行
			- 0による除算
			- アドレス指定エラー
			- 記憶保護違反

		- 制御プログラム呼出し割込み（スーパバイザコール）

			- 入出力操作要求
			- タスク切替え
			- ページフォールト

	- 特性

		- 優先順位が付けられ、多重割込み制御が可能
		- 割込みの状態はPSW（Program Status Word：プログラム状態語に格納される）

	- 割込み動作

		- ①現在実行中のプログラムのPSW（旧PSW）をスタックに待避
		- ②割込み処理に対応したルーチンのPSW（新PSW）を設定
		- ③割込み処理ルーチンの実行

			- routine

				- ある機能を持ったの一連の命令群

		- ④旧PSWを新PSWにする
		- ⑤中断したプログラムの再開

### プロセッサの高速方式

- CISC（Complex Instruction Set Computer）

	- 複雑命令をVLSIでワンチップ化すること

		- VLSI：Very Large Scale Integration、大规模集成电路

	- 命令群：マイクロプログラム（ストアドロジック）

		- MicroProgram（Stored Logic）

- RISC（Reduced Instruction Set Computer）

	- 使用頻度の高い基本的な簡易命令だけにとどめ、各命令の実行じかんを向上させようとする方式である
	- 1命令の長さを固定長とし、さらに、1命令の実行時間を一定似することを重視している
	- 結線論理（ワイヤードロジック、布線論理、配線論理）

		- 命令の基本動作に対した固定配線を用意し、命令の解読結果に従って部分動作をする回路を順次呼出して１つの命令を実行する方式である

	- 一般的にプログラムの容量がCISCより大きくなることが多い、コンパイラの最適化技術が重要である

- パイプライン制御

	- プロセッセ内部において複数の命令をオーバラップさせて実行させること、見かけ上の実行速度を向上させる方式である

		- 条件分岐命令に不向き

			- 投機実行

				- プロセッサは分岐しそうかどうかを予測し、即座に決定した方の実行を開始する、予測が間違っていたことがわかると、分岐命令以降の処理結果は全て捨てる

		- 関数呼出しは分岐にするので、関数呼出しは分岐命令です。
		- パイプラインハザード（hazard）

			- 命令間の依存関係があると、待つかやり直しか

	- 基本操作（ステージ、ピッチ）
	- 例：IF ID OA OF EX RS はそれぞれ異なるリソースを利用の基本操作、次の命令を前の命令を1ステージずつずらして実行できる

		- IF：命令取り出し
		- ID：命令解読
		- OA：オぺランドアドレス計算

			- operand addressed

		- OF：オぺランド取り出し
		- EX：実行
		- RS：実行結果格納

- スーパスカラ方式

	- パイプラインを複数持ち、命令を同時並行的に行う仕組みである

- スーパパイプライン方式

	- パイプライン方式における各ステージをさらに複数のステージに分けた仕組みである

- 先回り制御

	- ある命令の実行中に使用しない装置や回路があれば、次の命令の操作を始め、命令を重複（一部並行な感じ）させていく方式である

### マルチプロセッサ

- 命令の流れとデーたの流れを着目分類

	- SISD

		- Single Instruction Single Data stream（逐次処理）
		- ノイマン型のコンピュータ

	- SIMD

		- Single Instruction Multiple Data stream（並列処理）
		- 1命令で複数データを処理。アレイプロセッサ（array processor）など

	- MISD

		- Multiple Instruction Single Data stream
		- 単一のデータを複数命令で処理。パイプライン

	- MIMD

		- Multiple Instruction Multiple Data stream
		- 複数データを複数命令で処理。マルチプロセッサなど

- 密結合マルチプロセッサ

	- Tightly Coupled MultiProcessor: TCMP
	- 主記臆体やOS、ディスクなどの資源を共有

- 疎結合マルチプロセス

	- Loosely Coupled MultiProcessor: LCMP
	- 複数のコンピュータシステムをLANやWANで接続したシステム

- 対称型マルチプロセッシング

	- Symmetrical MultiーProcessing：SMP
	- 複数プロセスの役目はおなじ、どちらにもどちらかを代替できる

- 非対称型マルチプロセッシング

	- Asymmetric Multi-Processing：AMP
	- 役目違う：例OSのカーネルを実行するとアプリケションを実行する専用なプロセッサ

## ２．２ メモリアーキテクチャ

### 情報素子

- ROM（Read Only Memory）

	- マスクROM

		- Masked ROM
		- 製造時点で記臆（以降の書換えは不可）

	- PROM

		- Programmable ROM
		- 使用者が最初に書込み（以降の書換えは不可）

	- EPROM

		- Erasable PROM
		- 一括消去と書換えが可能（紫外線で消去）

	- EEPROM

		- Electrically EPROM
		- 一括消去後、書換えが可能（電気的に消去）

- RAM（Random Access Memory）

	- 揮発性
	- 動作原理

		- バイポール（Bipolar）

			- 高速
			- 雑音の影響大
			- 集積度低
			- ビット単価高
			- 主にキャッシュ

		- MOS型（Metal Oxide Semiconductor）

			- CMOS（Complementary MOS）、動作速度が速くした
			- BiCOMS（Bipolar Complementary MOS）、ひとつの基板にバイポーラとCMOSの両方を使って回路を形成したものである

	- 構造から

		- SRAM（Static RAM）

			- バイポーラ型

				- フリップフロップで構成され、複数のトランジスタ（transistor）をこみ合わせて1ビットを表現のため、集積度が低い
				- 主にキャッシュメモリでの利用

			- MOS型

				- 高速で消費電力が少ない、、バッテリで動作するような機器に用いられている

		- DRAM（Dynamic RAM）

			- MOS型

				- 主に主記臆に用いられる
				- １つの素子で1ビットを表現で集積度が高い
				- コンデンサ（condenser）に電荷を蓄えるため、時間が経過すると放電してしまう。そこで、状態維持するために、一定の時間（数ミリ秒）ごとに充電するためのリフレッシュ動作が必要

- 磁性体メモリ

	- 大容量、補助記臆装置として使われる
	- 磁気ディスク、ハードディスク、磁気テープ、DAT（Digital Audio Tape recorder）

- 光メモリ

	- レーザ光を利用して記録や再生
	- CDーDVD、DVD、ブルーレイデスク

### メモリシステムの構成

- キャッシュメモリ

	- ライトスルー方式

		- キャッシュと主記憶体を同時にライト

	- ライトバック方式

		- キャッシュにライト、その後該当ブロックが主記憶体に追い出される時書き込み

- 平均命令実行時間（平均メモリアクセス時間）

	- NFP（Not Found Probability）
	- TCache ✖︎ NFP ＋ TMemory ✖︎ （1 ー NFP）

- メモリインタリーブ

	- アクセスを高速化する手段
	- バンク単位に分割し、連続したアドレスを割り当て、複数のバンクを同時並行的に読み書きする

		- マルチトンネル

### 主記憶装置の誤りの検出方式

- ECC（Error Correcting Code：誤り訂正符号）
- パリティチェック方式（Parity Check）

	- 奇数パリティチェック

		- 奇数ビット誤り検出可能、訂正不可

	- 偶数パリティチェック
	- 水平＆垂直パリティチェック

		- 奇数ビット誤り検出可能、偶数（0含む）誤りまで訂正可能）

- ハミング符号

	- 1ビットの誤り訂正可能、2ビット以上は検出可能
	- アルゴリズム

		- 2の階乗の位数は符号位、それ以外は情報位
		- 符号位は位数数字の二進制数の符号位が符号位とおなじの位のパリティチェックしている

	- 符号長

		- n ＝ 2のm階乗 ー 1

			- 符号自身の誤りも検出可能、全ての誤りの可能性2のm階乗で表示、mはハミング符号数

	- 情報数

		- k ＝ n ー m

### 入出力装置と入出力デバイス

- RAID

	- Redundant Arrays of Inexpensive Disks
	- ラベルの高さは処理方式やデータの方式パリティの配置などの違いを示すもので、高速性や信頼性の高さを示すものではない
	- 種別

		- RAID0

			- ストライピング（striping）
			- ディスクの数より相応の倍数のスピードになる、勿論、総線等の制御がある

		- RAID1

			- ミラーリング
			- ライトは二回、リードは速くなれる

		- RAID2、3、4

			- パリティディスクを固定、RAID2は復旧可能、RAID3、4は検出可能、RAID3のデータはビット／バイト単位の一方、RAID4はブロック単位に分割する

		- RAID5

			- パリティ付きストライピング
			- １つディスク分の容量がパリティ似する。パリティは均等に各ディスクに配置

		- RAID6

			- RAID5➕一つ独立したパリティを付けディスク

- 入出力インタフェース

	- シリアル

		- USB

			- USBハブを介して最大127まで
			- USB1

				- ハイスピードモード：12Mbps
				- ロースピードモード：1.5Mbps

					- マウス、キーボードなどで利用

			- USB2

				- ハイスピードモード：480Mbps

			- USB3、3.1

				- 5GMbps、10GMbps

			- USB4（thunderbolt3）

				- 40GMbps、typeーcモード：10GMbps
				- FireWireの後継技術規格（Start By Intel、Used By Apple）

			- プラグアンドプレイ機能や、ホットプラグ機能が揃えている

		- IEEE 1394（FireWire）

			- USB1と同時代のもの
			- ツリー接続で最大64台、デイジーチェーン接続で最大17台
			- BackPlaneモード

				- 12.5 Mbps 、25 Mbps、50 Mbps

			- Cableモード

				- 100 Mbps、200 Mbps、400 Mbps

		- Bluetooth

			- 免許なし使える2.45GHzの周波数帯域

		- IrDA

			- Infrared Data Associationは、赤外線通信の標準化団体

		- SATA

			- Serial ATA、ATAで採用されていたパラレル転送方式をシリアル転送方式に変更したものである
			- eSATA（external SATA）：外付けドライブ用

	- パラレル（Parallel）

		- SCSI

			- Small Computer System Interface
			- 一般はハードディスク装置、光ディスク装置、レーザプリンタ、CDーROM、イメージスキャナなどの高速データ転送
			- Ultra320 SCSIで、320Mbpsの転送能力を持つ
			- SCSIー3では、シリアル転送の規格もある

	- 不明OR混在可能

		- ZigBee

			- 家電向けの短距離無線通信規格、Bluetoothと似ている
			- 省電力で低コスト

		- NFC

			- Near Field Communication

- 補助記憶装置

	- 光ディスク

		- 再生専用型

			- 読込みのみ。CDーROM、DVDーROM

		- 追記型

			- 追加のみ（上書き不可）、CDーR、DVDーR、DVD＋R、BDーR

		- 書換え可能型

			- 一括消去して上書き。CDーRW、DVDーRAM、DVD＋RW、BDーRE

	- HDD／SSD

		- Hard／Solid State Drive

	- DVD／BD

		- Digital Versatile Disk
		- DVD：5〜10Gバイト
		- BD：25〜100Gバイト

*XMind: ZEN - Trial Version*