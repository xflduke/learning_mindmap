# システム構成要素

## クライアントサーバシステム（CS System）

### 特徴

- 情報処理の主体は、クライアントにある
- 3階層アーキテクチャは低速回線に最適
- 長所

	- 機能に対応したハードウェア／ソフトウェアの選択が可能
	- システムの機能や性能に対し柔軟な拡張性を持つ
	- 可用性（稼働率）の高いシステムの構築が可能
	- アプリケーション開発の生産性・保守性が向上
	- GUIを利用した操作性の高いアプリケーション開発が可能

- 短所

	- 分散化によってシステムのパフォーマンスが低下
	- ネットワークの負担の予測が困難
	- ハードウェアの管理や保守の作業量が増加
	- 異なるメーカーの製品であると障害発生時に原因の特定が困難
	- データ共有に伴うセキュリティの維持が困難

### 3層アーキテクチャ

- プレゼンテーション層（例：Webブラウザ）
- アプリケーション層（ファンクション層／ロジック層）（例：Webサーバ）
- データ層（データベースアクセス層）（例：DBサーバ）

### MVC：Model View Controller

- モデル層：データと手続き（ビジネスロジック）
- ビュー層：ユーザに表示
- コントローラ層：ユーザの入力に対して応答し処理

### 用語＆名詞

- 仮想化

	- コンピュータシステムをこうせいする資源を、物理的な構成から独立させて論理的な単位に編成することである
	- １つのしげんを分割、或は、複数のしげんを統一して１つに見せるの二種類がある

- RPC

	- Remote Procudure Call

- オーペンシステム

	- 仕様を標準化することで、異なるコンピュータメーばのハードウェアやソフトウェアを組み合わせて使用できるように構築されたコンピュータシステムである

- ストアドプロシージャ

	- 一連の処理の指示をサーバ側に登録したプログラムやテキストファイルを実行、AWS API／Lambda❓

- シンクライアント

	- ThinClient：TC

## システムの構成方式

### 考え方

- フォールトトレランス（fault tolerance）

	- プロセッサを含めてあらゆる機器を多重化することで、冗長構成すること

		- フォールトトレラントコンピュータ

- フォールトアボイダンス（フォールトイントレランス）

	- avoidance、intolerance
	- システムの構成要素に信頼性の高い機器を使用すること

- シンプレックスシステム（simplex）

	- 一台構成、片方面通信

### システム構成

- タンデムシステム（tandem、直列システム）

	- 冗長ではなく、機能分散や負荷分散の目的です

- クラスタ

	- 複数のコンピュータを結合してひとまとまりにしたシステムである、クラスタリングという

- シンクライアント

	- 端末を最小限にし、ほとんどはサーバで処理する、Network経由で資源を利用

- ピアツーピア（P2P）
- 分散処理システム

	- 複数のプログラムが並列的に複数台のコンピュータで実効され、それらが通信しあって１つの処理を行うシステムである

- CDN：Contents Delivery Network

	- 動画や音声など静的なコンテンツがよく使われ、災害対応、負荷分散ができる

### ストレージ

- DAS：Direct Attached Storage

	- 直接接続

		- EBS？

- SAN：Storage Area Network

	- サーバとストレージを接続するために専用のネットワークを使用

		- EFS？

- NAS：Network Attached Storage

	- ファイルを格納するサーバをネットワークに直接接続する

		- S3？

### 仮想化技術

- サーバの仮想化方式

	- ゲストOS方式
	- ハイパーバイザ方式

		- KVMでは、LinuxシステムでのVM管理ノードとして使えるため、見た目上はゲストOSとかなり類似になっている

- スケールアップ／スケールアウト⇆スケールイン
- シンプロビジョニング

	- 外部記憶装置（ストレージ）を仮想化して管理することにより、必要に応じて装置を追加して対応できるようにすること。 システム導入の初期に需要を予測して備える作業（プロビジョニング）がほとんど必要ないことからこのように呼ばれる

- ライブマイグレーション

	- 仮想サーバで稼動しているOSやソフトウェアを停止することなく、他の物理サーバへ移り替える技術である

		- 厳密には切り替えの瞬間にミリ秒単位の瞬断が生じるが、ネットワークのセッションなどが切断されることは無く、ユーザからは移動が行われたことは分からない。

## 処理形態

### 集中処理

- コンピュータやデータを地理的に集中して処理することを目的とした処理形態である
- 長所

	- スケールメリット（グロッシュ法則が成立）

		- プロセッサの性能は価格の2乗に比例する（分散環境では成立しない）

	- 要員、ハードウェア、ソフトウェアに無駄がないので運用面で経済的システム構成の標準化が容易
	- セキュリティの確保が容易

- 短所

	- バックログの滞積（環境の変化に柔軟な対応が困難）

		- バックログ：手つかずの仕事、開発に着手できてないソフトウェアを指す

	- オーバヘッドが大きくホストに負荷が集中
	- ホストに障害が発生するとシステム全体が停止
	- システムが複雑になり使いにくいことがある

- 例

	- バッチ処理

		- センタバッチ処理
		- リモートバッチ処理
		- 集信処理（データ取集システム）
		- 配信処理
		- 集配信処理

	- リアルタイム

		- オンライントランザクション処理
		- メッセージ交換
		- 問合せ応答（会話型処理）
		- TSS（リアルシェアリング）

			- Time Share System

		- リアルタイム制御（プロセス制御）

### 分散処理

- 水平分散

	- 水平負荷分散

		- システムの信頼性を高く、処理要求が発生すると空いているコンピュータが処理を担当する

	- 水平機能分散

		- 処理能力の限界を回避することを目指す、業務別やアプリケーションごとに処理するコンピュータを分ける

- 垂直（機能）分散

	- 処理機能や機器を持たせたシステム構成である、資源の最適利用と即応性を目指したもの

- 長所

	- 管理組織と機器の対応が取れるので管理責任が明確
	- 災害や障害の発生を局所化できる
	- マルチベンダ製品の導入でコストパフォーマンスが向上
	- アプリケーションや機器の追加が容易（保守性が高い）

- 短所

	- システムの実体が捉えにくい（障害箇所の特定が困難）
	- システム全体の性能はネットワークの性能に左右される
	- データの不整合が発生しやすい
	- 外部からの侵入に弱い

### 分散システムにおける集中化の意味

- 情報の一元管理
- アプリケーションの一元管理

	- バージョン管理等

- 資源の共同利用

	- 主に高価なシステム資源

## 稼働率と故障率

### 稼働率

- MTBF／（MTBF ＋ MTBR）

	- MTBF

		- Mean Time Between Failures：平均故障時間

	- MTBR

		- Mean Time Between Repair：平均修理時間

- 直列接続の稼働率
- 並列接続の稼働率

### 故障率

- 単位時間あたりの故障回数

	- 1／MTBF
	- 単位：FIT

		- 1時間あたり10のー9階乗回故障

## 信頼性

### RASIS（ラシス、レイシス）

- R：Reliability：信頼性：故障の発生を最小限に抑える指標

	- MTBFやその逆数の故障率

- A：Availability：可用性：継続して稼働させるための指標

	- 稼働率

- S：Serviceability：保守の容易性を示す指標

	- MTTR

- I：Integrity：保全性・完全性の指標
- S：Security：保護機能の強度の指標

### バスタブ曲線

- 初期故障期＜偶発故障期＞摩耗故障期
- 耐用寿命：規定の故障率の期間：初期故障期の中の時点〜摩耗故障期の中の時点

### 信頼性設計

- フェールセーフ

	- 安全側に制御する、障害が新たな障害を生まないように制御する、処理を停止することもある

- フェールソフト

	- 一部故障が発生しても、できる限りその影響を局所化し、システムの全面停止を避けようとする設計

		- デュプレックスシステム
		- マルチプロセッサシステム

	- フェールバック（縮退運転）

		- 機能を限定的にして稼動を続ける操作

- フェールオーバ

	- 障害が発生時に代替装置やシステムが処理やデーたを引き継ぐ機能である

- フェールバック

	- 障害から復旧した元のシステムに、代替システムから処理を引き継いで元の状態に戻すことである
	- 障害の発生した元のシスてむが障害から復旧すると、待機系から再び処理を引き継ぐ

- フェールマスキング

	- 機器などに故障が発生した時、その影響が外部に出ないようにする

		- 冗長化など

			- デュアルシステム

				- 同期運転、瞬時の故障も許されない

			- デュプレックスシステム（Duplex System、待機システム）

				- １つのみ運転、もう一つは待機

					- ホットスタンバイシステム

						- 従系のシステムは常に稼働可能な状態で待機（フェールオーバで利用可能）

					- ウォームスタンバイ

						- 従系は本番と同じような状態で用意してあるが、すぐに稼働はできないの状態で待機（立ち上がる、AP稼働などが必要）

					- コールドスタンバイシステム（cold）

						- 機器の用意だけをして稼働せずに待機

- フールプルーフ（proof）

	- 不特定多数の利用者がいるプログラムにおいて、意図しない使われ方をしても故障しないような工夫を施すことである

- スケールアウト

	- サーバの数を増やすことでサーバ群全体のパフォーマンスを向上させること

- スケールアップ

	- 既存サーバの性能を強化して性能を向上させること

### 信頼性計算

- 並列システム
- 直列システム
- ３つ以上の組み合わせシステム

## 性能指標

### 評価対象

- CPUの処理能力

	- MIPS

		- Million Instruction Per Second
		- 1秒間の実行命令数を百万単位で表示

	- FLOPS

		- Floatinng Point Operation Per Second
		- 1秒間の浮動小数点命令の実行数を表示

			- 主に科学計算やシミュレーションを行うスーパーコンピュータ、ゲーム機などの性能を表す

	- 命令ミックス

		- 平均的なプログラムの命令の出現頻度と実行時間から1命令あたりの平均実行時間を表示

	- SPEC

		- Standard Performance Evaluation Corporation
		- UNIXの総合的な処理能力評価のベンチマーク

- バッチの処理能力

	- スループット

		- 単位時間あたりの処理可能なジョブ数やデータ量

	- TAT

		- TurnAround Time
		- 開始から終了までの時間間隔

- オンラインシステムの処理能力

	- OLTP：OnLine Transaction Process
	- 応答時間

		- 入力から出力開始までの時間間隔、レスポンスタイムという

	- TPS

		- Transaction Per Second
		- 1秒間に処理可能なトランザクション件数

	- TPC

		- Transaction Processing performance Council
		- OLTPの性能評価のベンチマーク

### 計算方法

- 命令ミクスとMIPS

	- 平均命令実行時間＝Σ命令実行時間✖️出現頻度

- TPS

	- Transaction Per Second：トランザクション処理能力
	- TPS（件／秒）＝MIPS値 ／ トランザクションの処理ステップ

- クロック（周波数）

	- 単位はヘルス（Hz）
	- CPI：Clock Per Instruction：命令あたりの平均クロック数

- レスポンスタイム（応答時間）

	- 入力し終わってから、データの応答が開始されるまでの時間

- ターンアラウンドタイム

	- データの入力が始まってから、応答が完全に終わるまでの時間

- スループット

	- 単位時間あたりにシステムが処理できる処理数

- ベンチマークテスト

	- SPEC

		- Standard Performance Evaluation Corpoation：システム性能評価協会
		- 指標

			- SPECmark

				- SPECintとSPECfpを統合した値

			- SPECint

				- 整数演算性能の指標

			- SPECfp

				- 浮動小数点数演算の指標

	- TPC

		- Transaction Processing performance Council：トランザクション処理性能評議会
		- 指標

			- TPCーA

				- 銀行の窓口業務をモデル化

			- TPCーB

				- TPCーAからオンラインの負荷テストを除外

			- TPCーC

				- 複雑な受注業務をモデル化、実際の企業内システムに近似したOLTPを評価

			- TPCーH

				- 大型基幹業務向け意思決定支援環境をシミュレートして性能を評価

			- TPCーR

				- ビジネスレポートを意思決定支援環境をシミュレートして性能を評価

			- TPCーW

				- WebベースのOLTPの性能を評価（電子商取引システム向け）

### モニタリング

- 実稼働中のシステムのソフトウェアやハードウェアによって収集し、測定結果から性能や稼働状況を評価

	- ハードウェアモニタリング

		- 命令実行回数と所用時間
		- 命令種別の実行頻度
		- バッファ、キャッシュメモリのヒット率
		- 主記憶のアクセス分布
		- マルチプロセッサの競合状態

	- ソフトウェアモニタリング

		- スーパバイザモードの時間の割合
		- 装置の負荷状況
		- メモリの使用状況
		- 応答時間
		- 仮想記憶のページング状況
		- ジョブステップごとの資源の利用状況
		- ジョブの多重度と待ち状況
		- 事象トレース（タスク切替え、割込み）

	- 併用

		- プロセッサ、チャネル、入出力装置の利用率、磁気ディスクのアクセす分布

### キャパシティプランニング（capacity planning）

- 計画・開発中、稼動中のシステムに求められるリソースの処理能力や数量などを見積もり、最適なシステム構成を計画する

	- ワークロード情報の収集
	- サイジング
	- 評価・チューニング

## ファイバチャネル（FC：Fibre Channel）

### 高速ネットワークを構築する技術の１つである、機器の接続に光ファイバや同軸ケーブルを用いている

*XMind: ZEN - Trial Version*