# ＮＷ：００_基礎
## 通信の仕組み
### プロトコルの約束に合わせて相手にデータと送受信を行う
#### プロトコル
##### デバイスの間ネットワークを利用して通信するために決められた約束ごとです
##### 国際標準化機構のISO（International  Oganization for Standardization）
###### 国際標準OSI（Open System Interconnection：開放型システム間相互接続）
##### 大学などの研究機関やコンピュータ業界が中心となって推進してきた団体であるIETF（Internet Engineering  Task Force）
###### RFC：Request For Comments
* その中にある：TCP／IP（Transmission Control  Protocol／Internet Protocol）
    * ←インターネットのデファクトスタンダード（De  facto Standard：国際機関や公的機関が定めた標準ではありませんが、事実上の標準として広まっているもののこと）
* ジョークRFCもある：RFC1149など、伝書鳩などを使ってインタネット上でデータを伝送するためのプロトコル
#### パケット
##### 単位に分割して送信する、パケットごとにヘッダーがつき、宛先のアドレス（IPアドレス／MACアドレス）がついている
###### パケット
* ネットワークインタフェース層
    * あて先MACアドレス
    * 送信先MACアドレス
    * イーサネットタイプ
        * 上位層のプロトコルを分ける、例IP
* インターネット層
    * 送信元IPアドレス
    * あて先IPアドレス
    * プロトコールタイプ
        * 上位層のプロトコルを分ける、例TCP
* トランスポート層
    * 送信元ポート番号
    * あて先ポート番号
        * 上位層のプロトコルを分ける、例80
* アプリケーション層
    * データ
##### 解析ツール
###### WiresharkやMicrosoft Message、Scapyなど
## OSIモデル
### アプリケーション層
#### 実際の目的を実現させるレヤー
### プレゼンテーション層
#### 通信に適しデータ形式を変換、圧縮など
### セッション層
#### データの流れる経路であるコネクションの開始や終了を管理、同期
### トランザクション層
#### 通信の信頼性を確保
### ネットワーク層
#### ネットワーク上データが始点から終点まで届くように管理する
### データリンク層
#### ネットワーク上データが直接接続された通信機器まで配送される用に管理する
##### この層で作成されたパケットをフレームと呼ぶ
### 物理層
#### 物理的な接続を管理し、ディジタルデータを物理信号へ変換（電気信号、光等）
### TCP／IPのアプリケーション層
### TCP／IPのトランスポート層
#### 代表的なのは：TCP、UDP
### TCP／IPのインターネット層
#### 代表的なのは：IP
### TCP／IPのネットワークインタフェース層
## 通信方式の種類
### コネクション型とコネクションレス型
### 通信回線
#### 回線交換
##### 完全に1対1で繋ぐ回線交換
###### 確実に一定の速度でデータを送る必要がある
#### パケット交換
##### 複数のユーザで回線を共有するパケット交換
###### 相手を区別するためにパケットヘッダが必要
###### 複数のユーザが一斎に送信を行なったため回線にパケットが溢れて処理できない状態を輻輳といい
### 範囲
#### LAN：Local Area Network
##### 施設内など、ユーザが自分で管理できる範囲のネットワーク
#### WAN：Wide Area Network
##### 都市間や国際間など、広い範囲に及ぶネットワーク、電気通信事業者画管理する必要がある
###### 電気通信事象者
* 電気通信サービスを提供する会社です、通信キャリアや通信事業者とも呼ばれます．電気通信事業法に基づき電気通信事務を営むので、事業に際しては電気通信事業者の登録を行うことが義務付けられている
### データ形式
#### アナログ
#### ディジタル
#### A／D変換、D／A変換（Analog／Digital）
##### 標本化（サンプリング）
###### 連続したデータを一定の間隔を置いてサンプリングすること
* 標本化定理：ある周波数のアナログをディジタルデータに変換する時、それをアナログ信号に復元するためには、その周波数の2倍のサンプリング周波数が必要だといった定理
##### 量子化
###### サンプリングしたアナログの値をディジタル値に変換できるように加工すること
* 量子化による誤差を量子化誤差と呼ぶ
##### 符号化
###### ディジタル値を2進数に変換すること
* この２進数の桁数を分解能と呼ぶ
##### ESではこの二つを量子化という
### データ形式
#### テキストデータ
##### 昔のパソコン通信などによるデータ伝送では、通信回線や手順などの都合でテキストデータしか送信できませんでした
###### 当時、バイナリデータを送るため特別なプロトコルが必要
* ベーシック手順（全銀協標準通信プロトコル）：テキストデータしか送れない
    * 銀行と企業との間でオンラインデータの交換を行う場合に使用することを目的として開発された通信手順
* HDLC（High level Data Link Control）手順：バイナリデータを送る可能になった
    * イーサネットやPPPのパケットもこの考え
#### バイナリデータ
## ITインフラ
### 概念
#### IT（Information Technology：情報技術）を使うために必要なインフラストラクチャ
##### 構成要素
###### ハードウェア
* サーバ
    * 型
        * CPU
            * サーバ専用に設計されたCPUなどを持つエンタープライズサーバ
            * 通常のPCに搭載されているインテル製などのCPUを使ったIAサーバ（Intel  Architecture Server）
        * 配置
            * タワー型サーバ
            * ラックマウント型サーバ
                * 配線が集中するので、ケーブルの繋ぎ方法を工夫必要、パッチパネルなどを利用しわかりやすくなるなど
            * ブレード型サーバ
                * 電源や外部へのインタフェースをサーバ間共有することで、複数のサーバを集積して高密度化、省スペース化を実現したもの
    * スペック
        * 要素
            * CPU
                * クロック数（周波数）、個数、コア数、キャッシュ容量、仮想化対応の有無など
            * メモリ
                * 容量、転送速度、枚数、ECC、クロック数、電力消費、IOMMUの有無など
            * ディスク
                * 容量、HDD／SSD、速度、耐久性など
            * NIC
                * ポート数、通信速度など
            * 保守性
                * 保守年数、保守対応日、出張・24時間対応、SLAなど
            * 拡張性
                * メモリソケット数、PCIソケット数など
            * 信頼性
                * RAID構成、冗長化有無など
    * OS
        * 同時に接続できる台数など、不特定多数対応など特性があり、サーバ専用のOSが一般です
* クライアント（PCなど）
* ストレージ
    * 種類
        * HDD、SSD、CD-R、DVD-R、磁気テープ、SDカードなど
    * 易失性
        * メモリ（主記憶装置）←電源維持要
        * ストレージ（補助記憶装置）
    * 内部ストレージ
    * 外部ストレージ
        * DAS（Direct Attached Storage）
            * サーバにストレージを直接接続
        * SAN（Storage Area Network）
            * 専用のネットワークを使って接続、ファイバチャネルやIPネットワークなどを使って内蔵されたストレージのように使用することができる
        * NAS（Network Attached Storage）
            * 一般ネットワーク、サーバから見ると外部のネットワークであるサーバに接続するイメージ
        * 複数のサーバやクライアントで共有できる、ストレージの資源を効率敵に活用することができる
    * RAID（Redundant Arrays of Inexpensive Disks）
        * RAID0（ストライピング）
            * 複数台を分散し高速化、信頼性が一台よりも落ちる
        * RAID1（ミラーリング）
            * 複数台に同じデータを書き込み、信頼性が上がるが、書込みの性能面あんまりかわらない
        * RAID0＋1、RAID1＋0
            * 最低4台
        * RAID3
            * 複数台のディスクの内一台を誤り訂正用のパリティディスクにする、ビット単位で行うのはRAID3
        * RAID4
            * RAID3との区別点はブロック単位になる
        * RAID5
            * RAID3より、パリティをブロックごとに複数ディスクに分散、通常時にも全てのディスクを使うようにした方式
        * RAID6
            * 冗長データを2種類作成することで、2台のディスクが故障しても使用がないようにした方式
        * 最低3台
* ネットワーク機器
    * ケーブル
        * ツイストペアケーブル（対線）
        * 光ファイバケーブル
    * ネットワークインタフェース
        * ネットワーク機器は製造メーカによって独自OSが採用されており、メーカごとにコマンド体系が異なる．メーカーの異なるネットワーク機器を導入すると、相互接続性に問題が起こるだけでなく、設定や運用管理の手間が増やす．そのため導入するネットワーク機器のベンダは統一することが一般です．
    * LAN間接続装置の種類
        * リピータ（第一層、L1、物理層）
            * 電気信号を増幅して整形する装置
                * すべてのパケットを全端末に中継するので、接続数が多くなってくるとパケットの衝突が発生し、ネットワークが遅くなる
                    * ハブ（リピータハブ、L1スイッチ）の段数（端末間に設置するハブの数）に制限がある
                        * 10BASE-Tでは4段
                        * 100BASE~TXは2段
                        * ブリッジ以上では、パケットを一旦受け取ってから転送するため、段数の制限がないです
            * L1スイッチとも呼ぶ
        * ブリッジ（第二層、L2、データリンク層以下
            * データリンク層の情報（MACアドレスなど）に基づき、通信を中継するかどうかを決める装置
            * リピータ機能に加えて、MACアドレス学習機能とフィルタリング機能を揃えている
                * 送信元のMACアドレスをアドレステーブルに学習し、宛先のMACアドレスがアドレステーブルにある場合に、フィルタリングして、そのポートのみにデータを送信する．そのため、複数のホストが同時に通信が可能
                    * フォワーディング
                        * ポートに対してだけMACフレームを転送
                    * フラッディング
                        * 受信ポータ以外の全てのポートに対して転送
            * L2スイッチとも呼ぶ
        * ルータ（第三層、L3、ネットワーク層以下）
            * ネットワーク層の情報（IPアドレス、ルーティングテーブル）に基づき、通信の中継先を決めて転送する装置
                * 異なるネットワーク、異なるデータリンク層を相互に接続でき
            * L3スイッチとも呼ぶ
        * ゲートウェイ（第4〜7層、アプリケーション層以下）
            * トランスポート層以上でデータを中継する必要がある場合に用いる
                * 例
                    * プロキシサーバ
                    * VoIPゲートウェイ
                    * ロードバランサ
            * L4／L7スイッチとも呼ぶ
    * その他
        * インテリジェント
            * ネットワーク管理機能を揃えており、Web接続などで各ポートの設定を変更できる
                * ノンインテリジェントに対して高価
* OA機器（プリンタやコピー機など）
* ファシリティ
    * 施設、建物、設備などを指す、データセンタやラックや空調設備、電源設備などが含まれ
###### ソフトウェア
* OS（Operating System）
* ミドルウェア
    * DBMS、RPC（Remote Procedure  Call）などがある
* アプリケーションソフトウェア
* ファームウェア
    * ハードウェアを制御するプログラム、ネットワーク機器やサーバ本体、ストレージ本体やRAIDボードなど、さまざまなハードウェアや部品で使われている
##### ITインフラと技術者の役割
###### システムエンジニア
* アプリケーションソフトウェア
###### サーバエンジニア
* ミドルウェア、OS （ハードウェア）
###### ネットワークエンジニア
* ネットワーク機器
##### システム構成パターン
###### C／S、B／S
###### クラスタ
* 複数のコンピーターを結合してひとまとまりにしたシステム（クラスタリング）、負荷分散やHPC（High−Performance Computing：高性能計算）の手法でよく使われる
###### シンクライアント
* 必要な最小限の処理を行う端末
###### ピアツーピア
* サーバを介さず、端末同士で対等に通信を行う方式、いわゆるP2P
###### 分散処理システム
###### CDN（Contents Delivery  Network）
###### サーバのキャパシティ（収容できる能力）
* スケールアウト
    * 台数を増やす、負荷分散させて
* スケールアップ
    * サーバ自体を増強、メモリ増設やCPUなどのパーツ交換
##### データセンタ
###### I ITインフラを構築することに特化した施設です．電気や温度、ネットワーク、セキュリティ、災害対策などが十分に考慮され、信頼性の高いITインフラ運用を行うことができる
* メリット
    * サーバを２４時間✖️365日稼働し続けることが可能
    * システム運用に適した空調設備や電源設備
    * 通常のオフィスビルより堅牢な災害対策
    * アウトソーシングによるコスト削減
* 課題
    * セキュリティ要注意、責任範囲を明確化
        * データセンタのセキュリティ状況やコンプライアンス、内部統制や事業継続の観点での確認など、データセンタの業者に関するチェックを行っておくことが重要
