# ＥＳ：０６_要件定義とシステム設計

## 要件定義

### V字モデル：商品戦略→要求定義→システム設計→ソフトウェア設計→プログラミング→モジュールテスト→システム設計テスト→商品テスト→経営評価

### 要件定義

- システム設計に入る際に要求内容を体系的に分析し、設計に着手できるように整理を行う

	- 主な検討項目

		- 外部インタフェース仕様
		- ヒューマンインタフェース仕様
		- 性能条件
		- 信頼性及び安全性
		- 関連技術、要素技術の動向調査

- 参照：要求工学：Requirements Engineering

	- ソフトウェア開発において、要求仕様を決定するプロセスを工学的に定式化する技術である

- フィジビリティスタディ（実現可能性調査：feasibility study）

	- 要件定義の段階では、設計作業に入る前に、要求仕様が利用可能なリソースである開発期間内実現可能であるかについて事前検討

- 機能要件と非機能要件

	- 機能要件

		- システムの外部仕様として求められている機能に関する仕様である。ユーザの要求に直接応える仕様をいう

	- 非機能要件

		- ユーザの要求に直接は対応しない仕様及び制約事項をいう

- リアルタイム性

	- 必要な処理を必要な時間内に終わらせる特性

### トレードオフ問題

- 実現：ハードウェアとソフトウェア

	- ハードウェアで実現する場合

		- メ

			- 主に高速化

		- デ

			- コスト、消費電力、部品実装とメンテなど

	- ソフトウェアで実現する場合

		- コスト的なメリットがあるが、要検討事柄→

			- 実現可能性、機能名、性能面での検討
			- ソフトウェア所在環境の他の処理への影響
			- ソフトウェア開発とメンテコスト（期間も含む）

- ハードウェアトレードオフ

	- QCDの検討、例

		- 誤り訂正機能と効率やコスト
		- 消費電力と動作速度性能

			- CMOS論理回路では、同じの動作を行う場合の消費電力は動作周波数にほぼ比例する

- ソフトウェアトレードオフ

	- 参照：JIS X 25010：2013

		- ソフトウェア品質特性

			- 品質特性

				- 機能適合性

					- 品質副特性

			- 機能適合性：Functional Suitability

				- 明示された状況下で使用する時、明示的ニーズ及び暗黙のニーズを満足させる機能を、製品またはシステムが提供する度合い

					- 機能完全性
					- 機能正確性
					- 機能適切せい

			- 性能効率性：Performance Efficiency

				- 明記された状態（条件）で使用する資源の量に関係する性能の度合い

					- 時間効率性
					- 資源効率性
					- 容量満足性

			- 互換性：Compatibility

				- ハードウェア／ソフトウェア製品の他のモノとの交換することができる度合い

					- 共存性
					- 相互運用性

			- 使用性：Usability

				- 明示された利用状況において、有効性、効率性及び満足性を持つて明示された目標を達成するために、明示された利用者が製品またはシステムを利用することができる度合い

					- 適切度認識性
					- 習得性
					- 運用操作性
					- ユーザエラー防止性
					- ユーザインターフェース快美性
					- アクセシビリティ

			- 信頼性：Reliability

				- 明示された時間帯で、明示された条件下に、システム、製品または構成要素が明示された機能を実行する度合い

					- 成熟性
					- 可用性
					- 障害許容性（耐故障性）
					- 回復性

			- セキュリティ：Security

				- 人間または他の製品もしくはシステムが、認められた権限の種類及び水準に応じたデータアクセスの度合いを持てるように、製品またはシステムが情報及びデータを保護する度合い

					- 機密性
					- インテグリティ
					- 否認防止性
					- 責任追跡性
					- 真正性

			- 保守性：Maintainability

				- 意図した保守者によって、製品またはシステムが修正することができる有効性及び効率の度合い

					- モジュール性
					- 再利用性
					- 解析性
					- 修正性
					- 試験性

			- 移植性：Portability

				- 一つのハードウェア、ソフトウェアまたは他の運用環境若しくは利用環境からその他の環境に、システム、製品または構成要素を移すことができる有効性及び効率性の度合い

					- 適応性
					- 設置性
					- 置換性

### 用量見積もり

- 処理速度

	- CPU処理時間の計算

		- 通常はMIPS（Million Instructions Per Second）値で表す

			- 処理時間（秒）＝処理に必要な命令の数／（MIPS値✖️1000000）

	- 通信時間の計算

		- 伝送時間＝データ量／（回線速度✖️伝送効率）

			- 伝送効率の影響要素：スタートビット、ストップビット、CRCなど実データ以外ものや伝送あやまりでの再送

- 音声データの量の計算

	- １秒当たりのデータ量＝（１サンプル当たりのビット数）✖️（サンプリング周波数）✖️（チャネル数）

		- チャネル参照：モノラル（monaural）音声の場合は１、ステレオ（stereo）音声の場合は2
		- 参照

			- 電話品質の音声データ

				- １秒当たりのデータ量＝8✖️8kHz✖️1＝64000bps＝8000バイト／秒

			- オーディオ品質の音声データ

				- CDの記録形式は、非圧縮のPCM（Pulse Code Modulation）形式であり

					- １秒当たりのデータ量＝16✖️44.1kHz✖️2＝1411200bps＝17.64MB/s

			- 圧縮音声データ

				- 人間の聴覚心理特性を利用してオーディオ品質の音声を圧縮技術が、携帯用オーディオプレーヤなどで利用されている。（オリジナルデータの1/10程度に圧縮しても人間は両者の音質的な差にきづきにくいといわれている）

					- 圧縮ごのビットレートが128kbpsである時の圧縮率

						- 圧縮後のデータサイズ／オリジナルデータサイズ＝
128kbps／1411200bps≒0.09倍

- 画像データ量の計算

	- RGB形式

		- Red、Greenn、Blueそれぞれのデータを持つ、24ビットカラーの場合、1,677万色になる

	- YUV形式

		- 輝度（Y）情報は各ピクセルについてもつが、色差情報（U及びV）は2ピクセルに対して2倍とを使用し、隣り合う2ピクセルをまとめて同一の色情報を割り当てる

			- →輝度情報と合わせて1ピクセル当たり2倍とのデータ量となり、RGBよりも少なくなっている

				- テレビ放送で用いられている表現形式であり、白黒放送とカラー放送の互換性を考慮する必要から考案された

	- 静止画像データ

		- １枚当たりのデータ量＝（1ピクセル当たりのビット数）✖️横方向のピクセル数✖️縦方向のピクセル数

			- 黒白：1ビット、16色：4ビット、256色：8ビット

	- 動画データ

		- １秒当たりのデータ量＝１枚当たりのデータ量✖️１秒当たりのフレーム数

			- テレビ放送の非圧縮YUVの場合

				- １秒当たりのデータ量＝（1920✖️1080✖️16）✖️30＝995,328,000ビット≒124MBps
				- １秒当たりのデータ量＝（640✖️480✖️16）✖️30＝147,456,000ビット≒140Mbps≒18Mbps

			- DVDのMPEG−2形式では概ね4Mbps程度に圧縮されている、480pより圧縮率は1／35程度となっている

### データの圧縮方式

- 文書データの圧縮方式

	- エントロピー符号化：データの出現確率に応じて長さの異なる符号を割り当てることで圧縮する方式である。出現確率の高いデータには短い符号を割り当て、出現確率の低いデータには長い符号を割り当てることで、データ1個当たりの平均のビット長を抑え、データ全体での冗長性を低くする子で圧縮を行う

		- 例：ハフマン符号、LZ77符号、LZ78符号、適応型ハフマン符号など

- 音声データの圧縮方式

	- 非可逆圧縮（ロッシー）が一般

		- µ−law、A−law

			- サンプリングされた音声データのそれぞれに対して対数圧縮を行う圧縮方法で、電話回線ネットワークでの音声データの圧縮にひろくつかわれている。

		- ADPCM：Adaptive Differential PCM：適応差分PCM

			- 隣接するサンプル間での差分を符号化する圧縮方法である

				- 多くの場合隣接するサンプルの間で極端な変化がないことに着目して考案された方法、圧縮・展開とも連結するサンプルデータとの差分演算のみで行えるため、演算量は少なくで済む

					- PHSでの音声圧縮に用いられる

		- MP3（MPEG Audio Layer−3）、AAC（Advanced Aduio Coding）

			- 音声データを短い時間区分に分けた後、周波数成分に分解し、人間が認識しにくい部分の成分をを間引くことによって圧縮を行う方式である。

				- 圧縮・展開には周波数成分への分解や合成処理が必要

		- CELP：Code Excited Linear Prediction

			- 携帯電話向けに開発された音声圧縮技術。人間の音声で特徴的な波形のパターンをあらかじめ多数用意し、入力された音声と類似しているパターンをその中から選び、符号として送信する

				- 特化しているため、楽曲などの信号圧縮に向かない

- 画像データの圧縮方式（静止画）

	- 非可逆

		- JPEG

			- 画像を縦横8画素の区画に分け、それぞれの区画で2次元DCT変換を行い、人間が認識しにくい部分の成分をカットした後、ハフマン符号によるエントロピー圧縮を行う

		- JPEG2000

			- JPEGのDCT変換に変わり、ウェーブレット変換が用いられている、JPEGよりも圧縮率を高めても画像の破綻が少ないとされている。ただ、圧縮・展開にかかる演算量はJPEGよりも多い

	- 可逆

		- MH、MR、MMR

			- ファクシミリ画像通信で用いられる白黒のような2値画像を圧縮するための画像圧縮規格

				- 連続データを数の情報に置き換える

		- GIF

			- LZWを使用した可逆圧縮方式の画像形式である

				- 取り扱える色の数は256色以下の制限がある。自然画像の圧縮に向かないが、使われる色数が少ないほど、または特定の色が多数の画素で使われるほど圧縮効率が高くなるため、Webページのボタンなどに使われている

		- PNG

			- ビットマップ画像を扱うファイルフォーマットである。圧縮アルゴリズムとしてDeflateを採用している、圧縮による画質の劣化のない可逆圧縮の画像ファイルフォーマットである

- 画像データの圧縮方式（動画）

	- 非可逆

		- Motion JPEG

			- JPEG画像を時系列に羅列して動画記録とする方式。各フレームが完全な画像情報を持つ

		- MPEG−1ビデオ

			- 主にビデオCDで利用されている圧縮方式であり、ビットレートは1.5Mbps程度、圧縮にはフレーム間予測技術が用いられる

		- MPEG−2ビデオ

			- DVDの動画記録やデジタル放送で採用されている圧縮方式、フレーム間予測技術が用いられる

				- Iフレーム（Intra−coded Frame）

					- 画像全体の情報を持つ、0.5秒に１回当たり記録
					- IFrameから次のIFrameまでに含まれる画像群をGOP（Group Of Picture）という。画像の記録は、このGOP単位で行われる

				- Pフレーム（Predicted Frame）

					- 直前の画像との差分情報のみを持つフレーム

				- Bフレーム（Bi−directional Predicted Frame）

					- 直前直後両方の画像との差分情報を持つフレーム

		- H.264

			- MPEG−2よりも符号化効率を上げた動画圧縮技術。圧縮アルゴリズの基本的な考え方はMPEG−2と同じであるが、画像ごとの特徴に適応的に対応することで、MPEG−2の約2倍の圧縮効率が得られと言われている

## システム設計

### 最適化設計

- リソース活用の全体最適

	- CPU演算能力、メモリ、ハードディスクなどのストレージ、システムバスの帯域、通信回線の速度など各種リソース総合的に最適化利用

		- 例：通信帯域が圧迫、CPUが余裕ある場合、圧縮等手法でCPU資源を使って通信データ量を減らす

- 通信性能の最適化

	- 割込みのオーバヘッド

		- バッファを利用で割込み回数を減らす

			- FIFOメモリ

				- あらかじめ設定されたデータ数に受信されたデータ数が達した時や送信バッファが空になった時割込みを発生させる機能がある

- 性能評価

	- 手法

		- 解析的な方法

			- 待ち行列などを用いてシステムをモデル化し、性能データを得るやり方

				- 計算量は比較的少なく、高精度の解が得られる

					- 計算モデルの正確さや計算精度には注意要

		- シミュレーション

			- 解析的に解が求められないモデルに対しても数値的に解が得られる
			- また、解析的な方法の検証用の用いられる

*XMind - Trial Version*